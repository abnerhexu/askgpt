# `askgpt` â€” ä¸€æ¬¾ç”¨äºä¸ GPT é£æ ¼ API äº¤äº’çš„å‘½ä»¤è¡Œå·¥å…·

`askgpt` æ˜¯ä¸€ä¸ªè½»é‡çº§ã€æ³¨é‡éšç§çš„å‘½ä»¤è¡Œç•Œé¢å·¥å…·ï¼Œå¯è®©ä½ ç›´æ¥ä»ç»ˆç«¯ä¸ GPT å…¼å®¹çš„ APIï¼ˆä¾‹å¦‚ OpenAIã€Azure OpenAI æˆ–è‡ªå®šä¹‰ç«¯ç‚¹ï¼‰è¿›è¡Œäº¤äº’ã€‚å®ƒå¼€ç®±å³ç”¨åœ°æ”¯æŒç¿»è¯‘ã€æ‘˜è¦ã€è§£é‡Šç­‰å¸¸è§ä»»åŠ¡ï¼ŒåŒæ—¶ä¹Ÿå…è®¸è‡ªç”±æ ¼å¼çš„æç¤ºå’Œå¤šè½®å¯¹è¯ã€‚

è¯¥å·¥å…·ä½¿ç”¨ Go è¯­è¨€ç¼–å†™ï¼Œå¼ºè°ƒç®€æ´æ€§ã€å¯é…ç½®æ€§ä»¥åŠæµå¼å“åº”ï¼Œä»¥æä¾›æµç•…çš„ç”¨æˆ·ä½“éªŒã€‚

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- **ä»»åŠ¡å¿«æ·æ–¹å¼**ï¼š  
  ä½¿ç”¨å†…ç½®æç¤ºå¤„ç†å¸¸è§çš„ NLP ä»»åŠ¡ï¼š
  - `translate-en` â€” ç¿»è¯‘ä¸ºè‹±æ–‡
  - `translate-zh` â€” ç¿»è¯‘ä¸ºä¸­æ–‡
  - `summarize` â€” æ‘˜è¦å†…å®¹
  - `explain` â€” è§£é‡ŠæŠ€æœ¯æ€§æˆ–å¤æ‚æ–‡æœ¬

- **æµå¼å“åº”**ï¼šå®æ—¶é€è¯ï¼ˆtokenï¼‰æ˜¾ç¤ºè¾“å‡ºã€‚

- **å¤šè¡Œè¾“å…¥ä¸ç²˜è´´æ¨¡å¼**ï¼š  
  - åœ¨è¡Œå°¾ä½¿ç”¨åæ–œæ  `\` å¯ç»­è¡Œè¾“å…¥
  - è¾“å…¥ `:paste` å¯ç²˜è´´å¤§æ®µå†…å®¹ï¼ˆä»¥å•ç‹¬ä¸€è¡Œ `:end` ç»“æŸï¼‰

- **æŒä¹…åŒ–é…ç½®**ï¼š  
  é…ç½®å®‰å…¨åœ°å­˜å‚¨åœ¨ `~/.askgpt/config.yaml`ï¼Œæƒé™è®¾ä¸º 600ã€‚

- **çµæ´»çš„é…ç½®æ ¼å¼**ï¼š  
  æ”¯æŒæ˜ å°„ï¼ˆmappingï¼‰å’Œæ˜ å°„åˆ—è¡¨ï¼ˆlist-of-mapsï¼‰ä¸¤ç§ YAML æ ·å¼ï¼Œæå‡ç”¨æˆ·å‹å¥½æ€§ã€‚

- **è‡ªè¯´æ˜çš„ CLI**ï¼š  
  åŒ…å« `show-config`ã€`set-url`ã€`set-model` å’Œ `set-key` å­å‘½ä»¤ã€‚

---

## ğŸš€ å®‰è£…

### ä»æºç å®‰è£…ï¼ˆéœ€ Go 1.21+ï¼‰

```sh
go install github.com/abnerhexu/askgpt@latest
```

ç”Ÿæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶å°†ä½äº `$GOPATH/bin/askgpt`ã€‚

---

## âš™ï¸ é…ç½®

é¦–æ¬¡è¿è¡Œæ—¶ï¼Œ`askgpt` ä¼šåœ¨ä»¥ä¸‹ä½ç½®åˆ›å»ºé…ç½®æ–‡ä»¶ï¼š

```
~/.askgpt/config.yaml
```

é…ç½®ç¤ºä¾‹ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰ï¼š

```yaml
# askgpt config
# æ‚¨å¯ç›´æ¥ç¼–è¾‘æ­¤æ–‡ä»¶ï¼Œæˆ–ä½¿ç”¨ï¼šaskgpt set-url | set-model | set-key
askgpt:
  - url: https://api.openai.com/v1/chat/completions
  - model: gpt-4o-mini
  - key: sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

> ğŸ”’ è¯¥æ–‡ä»¶ä»¥ `0600` æƒé™åˆ›å»ºï¼Œä»¥ä¿æŠ¤æ‚¨çš„ API å¯†é’¥ã€‚

### é€šè¿‡ CLI è®¾ç½®é…ç½®

```sh
askgpt set-url https://api.openai.com/v1/chat/completions
askgpt set-model gpt-4o-mini
askgpt set-key sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

---

## âŒ¨ï¸ è‡ªåŠ¨è¡¥å…¨

`askgpt` æ”¯æŒ `bash`ã€`zsh` å’Œ `fish` çš„å‘½ä»¤è¡Œè‡ªåŠ¨è¡¥å…¨ã€‚

### Bash
åœ¨æ‚¨çš„ `~/.bashrc` ä¸­æ·»åŠ ï¼š
```bash
source <(askgpt completion bash)
```

### Zsh
ç”Ÿæˆè¡¥å…¨è„šæœ¬å¹¶å°†å…¶æ”¾ç½®åœ¨æ‚¨çš„ `$fpath` è·¯å¾„ä¸‹çš„æŸä¸ªç›®å½•ä¸­ï¼š
```zsh
askgpt completion zsh > _askgpt
mv _askgpt /path/to/your/fpath/
```

### Fish
åœ¨æ‚¨çš„ `~/.config/fish/config.fish` ä¸­æ·»åŠ ï¼Œæˆ–ç›´æ¥è¿è¡Œï¼š
```fish
askgpt completion fish | source
```

---

## ğŸ§ª ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬ä»»åŠ¡

```sh
askgpt summarize
> The quick brown fox jumps over the lazy dog...
```

### è‡ªç”±æ ¼å¼æç¤º

å°†ä»»åŠ¡åè§†ä¸ºåˆå§‹æç¤ºï¼š

```sh
askgpt "Explain quantum entanglement in simple terms"
> [æŒ‰ Enter æˆ–ä½¿ç”¨ :paste è¾“å…¥å¤šè¡Œå†…å®¹]
```

### æŸ¥çœ‹å½“å‰é…ç½®

```sh
askgpt show-config
```

### å¤šè½®å¯¹è¯

åœ¨é¦–æ¬¡å“åº”åï¼Œæ‚¨å¯ä»¥ç»§ç»­èŠå¤©ï¼š
- è¾“å…¥ä¸‹ä¸€æ¡æ¶ˆæ¯
- è¾“å…¥ `quit` é€€å‡º
- ç©ºè¡Œå°†è¢«å¿½ç•¥

---

## ğŸ“ è¾“å…¥æç¤º

- **å•è¡Œè¾“å…¥**ï¼šè¾“å…¥åæŒ‰ `Enter`ã€‚
- **å¤šè¡Œè¾“å…¥**ï¼šåœ¨è¡Œå°¾åŠ  `\` ä»¥ç»§ç»­ä¸‹ä¸€è¡Œã€‚
- **ç²˜è´´æ¨¡å¼**ï¼šè¾“å…¥ `:paste`ï¼Œç²˜è´´å†…å®¹ï¼Œç„¶ååœ¨å•ç‹¬ä¸€è¡Œè¾“å…¥ `:end`ã€‚
- **é€€å‡º**ï¼šåœ¨ä»»æ„æç¤ºç¬¦ä¸‹è¾“å…¥ `quit`ã€‚

---

## ğŸ” å®‰å…¨è¯´æ˜

- æ‚¨çš„ API å¯†é’¥**ä»…**å­˜å‚¨äº `~/.askgpt/config.yaml`ï¼Œå¹¶è®¾ç½®ä¸ºä¸¥æ ¼æƒé™ï¼ˆ`rw-------`ï¼‰ã€‚
- æœ¬å·¥å…·ä¸ä¼šè®°å½•æˆ–å‘é…ç½®çš„ API ç«¯ç‚¹ä¹‹å¤–ä¼ è¾“æ‚¨çš„æç¤ºå†…å®¹ã€‚
- è¯·å§‹ç»ˆä½¿ç”¨ HTTPS ç«¯ç‚¹ã€‚

---

## ğŸ›  å¼€å‘

ä»æºç æ„å»ºï¼š

```sh
git clone https://github.com/abnerhexu/askgpt.git
cd askgpt
go build -o askgpt .
```

---

## ğŸ“œ è®¸å¯è¯

GPLv3 è®¸å¯è¯ â€” è¯¦æƒ…è¯·å‚è§ [LICENSE](LICENSE)ã€‚

---

## ğŸ™Œ è‡´è°¢

- ä½¿ç”¨ [`gopkg.in/yaml.v3`](https://pkg.go.dev/gopkg.in/yaml.v3) å®ç°çµæ´»çš„ YAML è§£æã€‚
- å— `curl`ã€`httpie` å’Œ `chatgpt-cli` ç­‰å·¥å…·å¯å‘ã€‚
- æœ¬æ–‡æ¡£ç”± Qwen3-Max ç”Ÿæˆã€‚

---

> ğŸ’¡ æœ‰å»ºè®®æˆ–å‘ç° Bugï¼Ÿæ¬¢è¿æäº¤ Issue æˆ– Pull Requestï¼